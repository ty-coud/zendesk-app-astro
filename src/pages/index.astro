---
import MintyButton from '~/components/minty-button';

import Layout from '~/layout.astro';
---

<Layout>
    <h1>Hi <span id="name"></span>, Welcome to Astro in Zendesk!</h1>
    <!-- Make sure to use an appopriate client:* directive with React components to load JS -->
    <MintyButton client:load />
</Layout>

<script lang="ts">
    const client = window.ZAFClient.init();
    client.invoke('resize', { width: '100%', height: '200px' });

    async function getCurrentUser() {
    	const { currentUser } = await client.get('currentUser');

    	document.querySelector('#name').textContent = currentUser.name;
    }

    getCurrentUser();
</script>
